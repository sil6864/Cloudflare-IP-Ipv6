# Cloudflare IP 抓取配置文件
# 所有参数均为必填项，缺失会导致脚本报错

sources:  # 需要抓取的IP数据源列表。每项可为：
  # - url: 必填，数据源URL
  #   selector: 可选，CSS选择器，优先用此选择器提取IP，未指定则自动智能识别
  #   page_type: 可选，页面类型(static/dynamic/api/table)，未指定则自动检测
  #   extra_headers: 可选，额外请求头
  #   wait_time: 可选，动态页面等待时间(ms)，默认5000ms
  #   actions: 可选，动态页面交互操作列表

  - url: https://stock.hostmonit.com/CloudFlareYesV6
    # 未指定page_type则自动智能识别
  - url: https://ipdb.030101.xyz/bestcfv6
    page_type: 'static'        # API类型页面，直接解析JSON
    response_format: 'json'  # 响应格式
    json_path: 'data.ips'    # JSON路径，用于提取IP列表

  - url: https://www.wetest.vip/page/cloudflare/address_v6.html
  - url: https://www.wetest.vip/page/cloudfront/total_v6.html



pattern: '([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]+|::(ffff(:0{1,4})?:)?((25[0-5]|(2[0-4]|1?[0-9])?[0-9])\.){3}(25[0-5]|(2[0-4]|1?[0-9])?[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1?[0-9])?[0-9])\.){3}(25[0-5]|(2[0-4]|1?[0-9])?[0-9])'

output: "ipv6.txt"         # 输出文件名
timeout: 10              # 网络请求超时时间（秒）
log: "fetch_cloudflare_ipv6.log"   # 日志文件名
max_workers: 4           # 并发线程数
log_level: "INFO"        # 日志等级
js_retry: 3              # JS动态抓取最大重试次数
js_retry_interval: 2.0   # JS动态抓取重试间隔（秒） 
max_ips_per_url: 10      # 每个URL最多保留多少个IP
per_url_limit_mode: "top"  # 超出限制时的筛选模式
exclude_ips:          # 排除IPv6列表
  - "2001:db8::1"        # 排除单个IPv6
  - "2001:db8::/64"      # 排除IPv6网段
allowed_regions:        # 只保留这些地区的IP
  - "US"
  - "HK"
ip_geo_api: "http://ip-api.com/json/{ip}"   # IP归属地API模板
auto_detect: true       # 是否自动检测页面类型
xpath_support: true     # 是否支持XPath选择器
follow_redirects: true  #
enable_telegram_notification: True
